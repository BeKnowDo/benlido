var bl_api_url="/bl-api",bl_new_kit_url=bl_api_url+"/kit/create",bl_has_multi=bl_api_url+"/kit/has-multi",bl_swap_url=bl_api_url+"/kit/swap";
function bl_add_item_to_kit(t){var a=jQuery(t).data("has_variations"),e=jQuery(t).data("variation_id");e=parseInt(e);var r=jQuery(t).data("product_id"),i=jQuery(t).data("category_id"),o=jQuery(t).data("index");if(1==a&&0<e){var n={index:o,product_id:r,category_id:i,variation_id:e,quantity:1};jQuery.post("/?wc-ajax=add_to_cart",n,function(t){jQuery(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,null])})}}function bl_add_product_to_kit(t){var a=jQuery(t).data("index");a||(a=0),jQuery(t).closest(".wrap-price").find("a.add_to_cart_button").first().data("index",a),jQuery(t).closest(".wrap-price").find("a.add_to_cart_button").first().click()}function bl_swap_product(t){var a=jQuery(t).data("index"),e=jQuery(t).data("product_id"),r=jQuery(t).data("variation_id"),i=jQuery(t).data("category_id"),o={product_id:e,variation_id:r,category_id:i,index:a};bl_swap_url&&(url=bl_swap_url+"/"+a+"/"+e+"/"+i,jQuery.post(url,o,function(t){t.url&&(location.href=t.url)}))}function bl_create_new_kit(){var t="";bl_new_kit_url&&(t=bl_new_kit_url),jQuery.post(t,{kit:"new"},function(t){jQuery(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,null])},"json")}function bl_rename_kit_start(t,a){t.stopPropagation(),t.preventDefault();var e=jQuery(a).closest("h3");e&&jQuery(e).addClass("edit")}function bl_rename_kit(t,a){t.stopPropagation(),t.preventDefault();var e,r="",i=jQuery(a).data("index");console.log("this"),console.log(a);var o=jQuery(a).closest(".edit-title").find('input[type="text"]').first().val();console.log("title"),console.log(o),e={index:i,kit_name:o},bl_api_url&&(r=bl_api_url+"/kit/rename"),0<r.length&&jQuery.post(r,e,function(t){void 0!==t.fragments&&jQuery(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,null])})}function bl_rename_cancel(t,a){t.stopPropagation(),t.preventDefault();var e=jQuery(a).closest("h3");e&&jQuery(e).removeClass("edit")}function bl_start_add_bag(t,a){t.stopPropagation(),t.preventDefault();var e=jQuery(a).data("index"),r="";e||(e=0);var i={index:e};bl_api_url&&(r=bl_api_url+"/kit/start-add-bag"),0<r.length&&jQuery.post(r,i,function(t){void 0!==t.redirect_url&&(document.location.href=t.redirect_url)},"json")}function bl_update_choices_containers(){console.log("update choices containers"),bl_has_multi&&(url=bl_has_multi),jQuery("body.post-type-archive-product .choices-container, body.tax-product_cat .choices-container").hasClass("choices-container")&&jQuery.post(url,{},function(t){jQuery("body.post-type-archive-product .choices-container, body.tax-product_cat .choices-container").each(function(){jQuery(this).html(t)})},"html")}jQuery(document).ready(function(r){r(".create-kit").height(r(".last_kit").height()),r(".js-variation-select").on("click",function(){var e=r(this).data("variation_id");if(e){r("#bag-"+r(this).data("product_id")).data("variation_id",e);var t=r(this).closest(".product-grid-single");r(".choices-container a",t).each(function(t,a){console.log(a),r(a).data("variation_id",e)}),r("#product-id-"+r(this).data("product_id")+" div").removeClass("selected"),r(this).addClass("selected")}}),r(".needs-variation").on("click",function(t){t.preventDefault();var a=this;r(a).data("variation_id")||(t.stopPropagation(),alert("Please select a color"),setTimeout(function(){jQuery(a).removeClass("loading")},100))}),r("body.single-product .single_add_to_cart_button").on("click",function(t){t.preventDefault()}),r(".bl-add-kit-to-cart").on("click",function(t){t.preventDefault();var a=r(this).attr("href"),e=this;r(this).addClass("loading"),a&&r.post(a,{},function(t){jQuery(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,null]),r(e).removeClass("loading")},"json")})}),jQuery(document).ready(function(){bl_update_choices_containers()});